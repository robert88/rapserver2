
"use strict";

module.exports = class AsyncSeries{
	constructor(array, callback){
		this.queue = array;
		this.status = "ide";
		this.callback = callback;
		this.run();
	}
	run(){
		if(this.status=="ide"){
			this.status = "busy";
			this.next();
		}
	}
	next(){

		if(this.queue.length){
			let running = this.queue.shift();
			let ret = arguments
			Array.prototype.unshift.call(ret,this);
			running.apply(this,ret);
		}else{
			this.done.apply(this,arguments)
		}
	}
	done(){
		this.status = "ide";
		this.callback.apply(null,arguments)
		this.queue = null;
		this.callback = null;
	}
}

